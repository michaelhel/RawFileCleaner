<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>RawFileCleaner</title>
  <link rel="stylesheet" type="text/css" href="style.css" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <script src="script.js"></script>
</head>

<body>
  <div id="container">
    <div>
      <a href="conclusion.html">
                <img id="imgBack" src="img/back.svg" />
            </a>
    </div>
    <div id="tableData"></div>
  </div>

  <script type="text/javascript">
    window.onload = view;

    function view() {
      const storage = require('electron-json-storage');
      storage.get('deletedFiles', function(error, data) {
        if (error) throw error;
        var container = document.getElementById("tableData");
        var table = document.createElement('table');
        var tbody = document.createElement('tbody');

        var row = document.createElement('tr');
        var head = document.createElement('th');
        head.textContent = "Filename";
        head.style.textAlign = "left";
        row.appendChild(head);
        var head = document.createElement('th');
        head.textContent = "Path";
        head.style.textAlign = "left";
        row.appendChild(head);
        tbody.appendChild(row);

        var Parent = document.getElementById("tableData");
        while (Parent.hasChildNodes()) {
          Parent.removeChild(Parent.firstChild);
        }

        for (var i = 0; i < data.length; i++) {
          var row = document.createElement('tr');
          var cell = document.createElement('td');
          cell.textContent = data[i].fileName;
          cell.style.textAlign = "left";
          row.appendChild(cell);
          var cell = document.createElement('td');
          cell.textContent = data[i].path;
          cell.style.textAlign = "left";
          row.appendChild(cell);
          tbody.appendChild(row);
        }
        table.appendChild(tbody);
        table.style.width = "80%";
        table.style.alignContent = "left";
        container.appendChild(table);
      });
    }

    var remote = require('electron').remote;
    var electronFs = remote.require('fs');

    storage = require('electron-json-storage');
    document.addEventListener('keydown', function(e) {
      if (e.which === 123) {
        remote.getCurrentWindow().webContents.openDevTools();
      } else if (e.which === 116) {
        location.reload();
      }
    });
  </script>
</body>

</html>